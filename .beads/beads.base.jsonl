{"id":"feishu_assistant-7xv","title":"Implement card action handling for interactive card buttons","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-20T17:38:01.920402+08:00","updated_at":"2025-11-20T17:47:34.568098+08:00","closed_at":"2025-11-20T17:47:34.568098+08:00"}
{"id":"feishu_assistant-aps","title":"Investigate and fix socket connection reset in threading","status":"open","priority":2,"issue_type":"bug","created_at":"2025-11-20T17:42:50.02121+08:00","updated_at":"2025-11-20T17:42:50.02121+08:00"}
{"id":"feishu_assistant-m6l","title":"Handle rate limiting for free LLM models (kwaipilot 429 errors)","status":"open","priority":1,"issue_type":"bug","created_at":"2025-11-20T17:42:45.434957+08:00","updated_at":"2025-11-20T17:42:45.434957+08:00"}
{"id":"feishu_assistant-411","title":"Create /history/ directory for AI-generated planning documents","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-20T17:28:14.568586+08:00","updated_at":"2025-11-20T17:28:14.568586+08:00"}
{"id":"feishu_assistant-o07","title":"Buttons not rendering in conversation - finalizeCardWithFollowups not being called","status":"open","priority":1,"issue_type":"bug","created_at":"2025-11-20T19:15:21.972151+08:00","updated_at":"2025-11-20T19:15:21.972151+08:00"}
{"id":"feishu_assistant-9ls","title":"Server startup still slow or failing - investigate and fix","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-11-20T18:45:22.439447+08:00","updated_at":"2025-11-20T18:53:34.933763+08:00","closed_at":"2025-11-20T18:53:34.933763+08:00"}
{"id":"feishu_assistant-t9k","title":"Buttons not rendering in conversation - finalizeCardWithFollowups not being called","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-11-20T19:15:27.435232+08:00","updated_at":"2025-11-20T19:17:23.298906+08:00","closed_at":"2025-11-20T19:17:23.298906+08:00"}
{"id":"feishu_assistant-v8r","title":"Update .gitignore to exclude /history/ directory","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-20T17:28:19.527161+08:00","updated_at":"2025-11-20T17:28:19.527161+08:00"}
{"id":"feishu_assistant-2am","title":"Add test coverage for placeholder agents (alignment, P\u0026L, DPA PM)","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-20T17:42:59.674561+08:00","updated_at":"2025-11-20T17:42:59.674561+08:00"}
{"id":"feishu_assistant-520","title":"Organize documentation into /docs/ folder structure","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-20T17:28:09.797215+08:00","updated_at":"2025-11-20T17:28:09.797215+08:00"}
{"id":"feishu_assistant-k5h","title":"Fix TypeScript deep type recursion workarounds","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-20T17:42:40.184363+08:00","updated_at":"2025-11-20T17:42:40.184363+08:00"}
{"id":"feishu_assistant-f15","title":"Establish code style conventions for implementation docs","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-20T17:28:28.811304+08:00","updated_at":"2025-11-20T17:28:28.811304+08:00"}
{"id":"feishu_assistant-9im","title":"Server startup failures and WebSocket connection issues - ROOT PROBLEM","description":"## PROBLEM STATEMENT\n\nServer startup and WebSocket connection has been unstable throughout development sessions. The root cause has not been properly diagnosed or fixed. We need to systematically identify and resolve the underlying issues.\n\n## WHAT WE'VE OBSERVED\n\n1. **Intermittent Startup Failures**: Server sometimes starts successfully, sometimes hangs\n2. **WebSocket Connection Issues**: Connection appears to establish but reliability is uncertain\n3. **Long Debugging Sessions**: We've spent extended time testing buttons, checking logs, restarting servers without identifying the root cause\n4. **Manual Workarounds**: We're using nohup, pid files, sleep commands - signs of working around problems rather than fixing them\n\n## IMPACT\n\n- Cannot reliably start the server for testing\n- Unclear if production deployment will have similar issues\n- Development velocity severely impacted by restarts and debugging\n- No clear diagnostic tools to understand what's happening\n\n## AREAS TO INVESTIGATE\n\n### 1. Server Startup Process\n- [ ] Check if initial WebSocket connection is blocking server startup\n- [ ] Look at initialization order in server.ts\n- [ ] Verify all dependencies are loaded before listening on port 3000\n- [ ] Check for race conditions in async initialization\n\n### 2. WebSocket Connection Handling\n- [ ] Verify Feishu SDK setup and initialization\n- [ ] Check if event-dispatch is fully ready before accepting events\n- [ ] Look at error handling for failed connections\n- [ ] Determine if WebSocket reconnection logic is working\n\n### 3. Environment and Dependencies\n- [ ] Verify Supabase is optional or gracefully skipped\n- [ ] Check if missing env vars are properly handled\n- [ ] Review all external service dependencies\n\n### 4. Logging and Diagnostics\n- [ ] Add detailed startup phase logging\n- [ ] Log WebSocket lifecycle events (connecting, connected, reconnecting, failed)\n- [ ] Add health check endpoint that shows detailed status\n- [ ] Log timing information to identify bottlenecks\n\n## ACCEPTANCE CRITERIA\n\n- [ ] Server starts reliably 100% of the time (no hangs, no race conditions)\n- [ ] WebSocket connection status is clearly visible in logs\n- [ ] Health endpoint shows detailed startup and connection status\n- [ ] Can diagnose connection failures without inspecting code\n- [ ] Startup time is documented and predictable (\u003c10s)\n\n## TECHNICAL NOTES\n\n- Current startup code in server.ts appears to initialize WebSocket and Feishu SDK\n- Subscription Mode is being used (long-lived WebSocket instead of webhook polling)\n- There's a 5-8 second wait in AGENTS.md noted as \"startup time\" but actual behavior varies\n- No explicit timeout handling for WebSocket connection establishment\n\n## NEXT STEPS\n\n1. Add detailed logging to server.ts startup sequence\n2. Create startup verification tests\n3. Document expected startup phases and timing\n4. Add explicit error handling for connection failures\n5. Verify all startup warnings can be safely ignored","status":"closed","issue_type":"bug","created_at":"2025-11-20T19:01:22.366615+08:00","updated_at":"2025-11-20T19:03:55.023249+08:00","closed_at":"2025-11-20T19:03:55.023249+08:00"}
{"id":"feishu_assistant-su1","title":"Handle button selection and feed back to agent as new query","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-20T17:52:41.652186+08:00","updated_at":"2025-11-20T18:18:01.330625+08:00","closed_at":"2025-11-20T18:18:01.330625+08:00","dependencies":[{"issue_id":"feishu_assistant-su1","depends_on_id":"feishu_assistant-ibe","type":"discovered-from","created_at":"2025-11-20T17:52:41.652959+08:00","created_by":"daemon"}]}
{"id":"feishu_assistant-ibe","title":"Render follow-up options as interactive buttons on Feishu cards","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-20T17:52:34.153059+08:00","updated_at":"2025-11-20T18:01:45.996325+08:00","closed_at":"2025-11-20T18:01:45.996325+08:00","dependencies":[{"issue_id":"feishu_assistant-ibe","depends_on_id":"feishu_assistant-xx9","type":"discovered-from","created_at":"2025-11-20T17:52:34.153636+08:00","created_by":"daemon"}]}
{"id":"feishu_assistant-xx9","title":"Generate follow-up questions/recommendations for agent responses","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-20T17:52:24.167953+08:00","updated_at":"2025-11-20T17:58:56.119663+08:00","closed_at":"2025-11-20T17:58:56.119663+08:00"}
