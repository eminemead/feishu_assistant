$ bun server.ts
[info]: [ "client ready" ]
ğŸ”§ AI SDK Devtools: Enabled with enhanced features
   - StreamInterceptor support
   - Token usage tracking
   - Session grouping
âœ… [Memory] Connected to Supabase database
[info]: [ "event-dispatch is ready" ]
ğŸ”§ Devtools available at: http://localhost:3000/devtools
ğŸ“‹ [Startup] Starting server initialization...
ğŸ“‹ [Startup] Step 0: Initializing Mastra Memory (3-layer architecture)...
âœ… [Memory] Connected to PostgreSQL storage (Mastra)
ğŸ”§ Devtools API: http://localhost:3000/devtools/api/events
ğŸ”§ Devtools Sessions: http://localhost:3000/devtools/api/sessions
ğŸ”§ Devtools Stats: http://localhost:3000/devtools/api/stats
âœ… [Memory] Mastra memory system initialized
âœ… [Startup] Step 0: Mastra Memory initialized
ğŸ“‹ [Startup] Mode: Subscription (WebSocket)
ğŸ“‹ [Startup] Step 1: Initializing WebSocket connection...
[info]: [ "[ws]", "receive events or callbacks through persistent connection only available in self-build & Feishu app, Configured in:\n        Developer Console(å¼€å‘è€…åå°) \n          ->\n        Events and Callbacks(äº‹ä»¶ä¸å›è°ƒ)\n          -> \n        Mode of event/callback subscription(è®¢é˜…æ–¹å¼)\n          -> \n        Receive events/callbacks through persistent connection(ä½¿ç”¨ é•¿è¿æ¥ æ¥æ”¶äº‹ä»¶/å›è°ƒ)" ]
âœ… [Startup] Step 1: WebSocket connection established
ğŸ“‹ [Startup] Ready to receive Feishu events
ğŸ“‹ [Startup] Step 2: Starting HTTP server...
âœ… [Startup] Step 2: HTTP server started on port 3000
âœ¨ [Startup] Server is ready to accept requests
ğŸ“Š [Startup] Health check: curl http://localhost:3000/health
âŒ [FATAL] Uncaught exception: error: Failed to start server. Is port 3000 in use?
 syscall: "listen",
   errno: 0,
    code: "EADDRINUSE"

      at serve (node:_http_server:554:41)

Stack: Error
    at serve (unknown)
    at [kRealListen] (node:_http_server:554:41)
    at listen (node:_http_server:531:35)
    at serve (/Users/xiaofei.yin/work_repo/feishu_assistant/node_modules/@hono/node-server/dist/index.mjs:572:10)
    at startServer (/Users/xiaofei.yin/work_repo/feishu_assistant/server.ts:650:3)
    at processTicksAndRejections (unknown:7:39)
[info]: [ "[ws]", "ws client ready" ]
